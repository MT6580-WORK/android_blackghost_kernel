#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H


// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUCT
{
    signed int percentage;
    signed int voltage;
} BATTERY_PROFILE_STRUCT, *BATTERY_PROFILE_STRUCT_P;

typedef struct _R_PROFILE_STRUCT
{
    signed int resistance; // Ohm
    signed int voltage;
} R_PROFILE_STRUCT, *R_PROFILE_STRUCT_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
BATT_TEMPERATURE Batt_Temperature_Table[] =
{
  { -20, 68237 },
  { -15, 53650 },
  { -10, 42506 },
  { -5, 33892 },
  { 0, 27219 },
  { 5, 22021 },
  { 10, 17926 },
  { 15, 14674 },
  { 20, 12081 },
  { 25, 10000 },
  { 30, 8315 },
  { 35, 6948 },
  { 40, 5834 },
  { 45, 4917 },
  { 50, 4161 },
  { 55, 3535 },
  { 60, 3014 }
};

// T0 -10C
BATTERY_PROFILE_STRUCT battery_profile_t0[] =
{
  { 0, 4188 },
  { 1, 4174 },
  { 3, 4159 },
  { 4, 4144 },
  { 5, 4131 },
  { 7, 4117 },
  { 8, 4104 },
  { 9, 4091 },
  { 11, 4079 },
  { 12, 4066 },
  { 13, 4054 },
  { 15, 4042 },
  { 16, 4031 },
  { 17, 4020 },
  { 19, 4009 },
  { 20, 3998 },
  { 21, 3988 },
  { 23, 3978 },
  { 24, 3968 },
  { 25, 3959 },
  { 27, 3950 },
  { 28, 3941 },
  { 29, 3932 },
  { 31, 3924 },
  { 32, 3916 },
  { 33, 3908 },
  { 35, 3900 },
  { 36, 3893 },
  { 37, 3885 },
  { 39, 3878 },
  { 40, 3872 },
  { 41, 3865 },
  { 43, 3857 },
  { 44, 3847 },
  { 45, 3834 },
  { 47, 3821 },
  { 48, 3812 },
  { 49, 3805 },
  { 51, 3799 },
  { 52, 3794 },
  { 53, 3790 },
  { 55, 3787 },
  { 56, 3783 },
  { 58, 3780 },
  { 59, 3777 },
  { 60, 3775 },
  { 62, 3773 },
  { 63, 3771 },
  { 64, 3769 },
  { 66, 3768 },
  { 67, 3766 },
  { 68, 3766 },
  { 70, 3764 },
  { 71, 3762 },
  { 72, 3758 },
  { 74, 3749 },
  { 75, 3744 },
  { 76, 3741 },
  { 78, 3736 },
  { 79, 3730 },
  { 80, 3722 },
  { 82, 3715 },
  { 83, 3707 },
  { 84, 3697 },
  { 86, 3683 },
  { 87, 3669 },
  { 88, 3654 },
  { 90, 3645 },
  { 91, 3640 },
  { 92, 3634 },
  { 94, 3626 },
  { 95, 3613 },
  { 96, 3587 },
  { 98, 3542 },
  { 99, 3472 },
  { 100, 3377 }
};

// T1 0C
BATTERY_PROFILE_STRUCT battery_profile_t1[] =
{
  { 0, 4149 },
  { 1, 4123 },
  { 3, 4104 },
  { 4, 4089 },
  { 6, 4075 },
  { 7, 4062 },
  { 9, 4049 },
  { 10, 4037 },
  { 12, 4026 },
  { 13, 4015 },
  { 14, 4004 },
  { 16, 3994 },
  { 17, 3984 },
  { 19, 3974 },
  { 20, 3965 },
  { 22, 3956 },
  { 23, 3947 },
  { 25, 3939 },
  { 26, 3931 },
  { 27, 3923 },
  { 29, 3915 },
  { 30, 3907 },
  { 32, 3899 },
  { 33, 3891 },
  { 35, 3882 },
  { 36, 3873 },
  { 38, 3861 },
  { 39, 3850 },
  { 40, 3838 },
  { 42, 3828 },
  { 43, 3819 },
  { 45, 3812 },
  { 46, 3806 },
  { 48, 3801 },
  { 49, 3797 },
  { 50, 3794 },
  { 52, 3791 },
  { 53, 3788 },
  { 55, 3786 },
  { 56, 3784 },
  { 58, 3783 },
  { 59, 3782 },
  { 61, 3780 },
  { 62, 3779 },
  { 63, 3778 },
  { 65, 3777 },
  { 66, 3775 },
  { 68, 3774 },
  { 69, 3771 },
  { 71, 3769 },
  { 72, 3766 },
  { 74, 3762 },
  { 75, 3757 },
  { 76, 3751 },
  { 78, 3744 },
  { 79, 3735 },
  { 81, 3725 },
  { 82, 3713 },
  { 84, 3699 },
  { 85, 3684 },
  { 87, 3668 },
  { 88, 3651 },
  { 89, 3634 },
  { 91, 3618 },
  { 92, 3600 },
  { 94, 3581 },
  { 95, 3562 },
  { 97, 3539 },
  { 98, 3501 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 }
};

// T2 25C
BATTERY_PROFILE_STRUCT battery_profile_t2[] =
{
  { 0, 4149 },
  { 1, 4123 },
  { 3, 4104 },
  { 4, 4089 },
  { 6, 4075 },
  { 7, 4062 },
  { 9, 4049 },
  { 10, 4037 },
  { 12, 4026 },
  { 13, 4015 },
  { 14, 4004 },
  { 16, 3994 },
  { 17, 3984 },
  { 19, 3974 },
  { 20, 3965 },
  { 22, 3956 },
  { 23, 3947 },
  { 25, 3939 },
  { 26, 3931 },
  { 27, 3923 },
  { 29, 3915 },
  { 30, 3907 },
  { 32, 3899 },
  { 33, 3891 },
  { 35, 3882 },
  { 36, 3873 },
  { 38, 3861 },
  { 39, 3850 },
  { 40, 3838 },
  { 42, 3828 },
  { 43, 3819 },
  { 45, 3812 },
  { 46, 3806 },
  { 48, 3801 },
  { 49, 3797 },
  { 50, 3794 },
  { 52, 3791 },
  { 53, 3788 },
  { 55, 3786 },
  { 56, 3784 },
  { 58, 3783 },
  { 59, 3782 },
  { 61, 3780 },
  { 62, 3779 },
  { 63, 3778 },
  { 65, 3777 },
  { 66, 3775 },
  { 68, 3774 },
  { 69, 3771 },
  { 71, 3769 },
  { 72, 3766 },
  { 74, 3762 },
  { 75, 3757 },
  { 76, 3751 },
  { 78, 3744 },
  { 79, 3735 },
  { 81, 3725 },
  { 82, 3713 },
  { 84, 3699 },
  { 85, 3684 },
  { 87, 3668 },
  { 88, 3651 },
  { 89, 3634 },
  { 91, 3618 },
  { 92, 3600 },
  { 94, 3581 },
  { 95, 3562 },
  { 97, 3539 },
  { 98, 3501 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 },
  { 100, 3433 }
};

// T3 50C
BATTERY_PROFILE_STRUCT battery_profile_t3[] =
{
  { 0, 4180 },
  { 1, 4165 },
  { 3, 4149 },
  { 4, 4135 },
  { 5, 4121 },
  { 7, 4108 },
  { 8, 4095 },
  { 9, 4082 },
  { 11, 4070 },
  { 12, 4058 },
  { 14, 4046 },
  { 15, 4034 },
  { 16, 4023 },
  { 18, 4012 },
  { 19, 4002 },
  { 20, 3991 },
  { 22, 3982 },
  { 23, 3972 },
  { 24, 3962 },
  { 26, 3953 },
  { 27, 3945 },
  { 28, 3936 },
  { 30, 3928 },
  { 31, 3920 },
  { 32, 3912 },
  { 34, 3905 },
  { 35, 3898 },
  { 37, 3890 },
  { 38, 3883 },
  { 39, 3876 },
  { 41, 3868 },
  { 42, 3858 },
  { 43, 3846 },
  { 45, 3835 },
  { 46, 3824 },
  { 47, 3815 },
  { 49, 3808 },
  { 50, 3802 },
  { 51, 3797 },
  { 53, 3793 },
  { 54, 3790 },
  { 55, 3786 },
  { 57, 3783 },
  { 58, 3781 },
  { 60, 3779 },
  { 61, 3777 },
  { 62, 3776 },
  { 64, 3774 },
  { 65, 3774 },
  { 66, 3772 },
  { 68, 3771 },
  { 69, 3770 },
  { 70, 3769 },
  { 72, 3767 },
  { 73, 3765 },
  { 74, 3762 },
  { 76, 3759 },
  { 77, 3754 },
  { 78, 3747 },
  { 80, 3739 },
  { 81, 3731 },
  { 83, 3722 },
  { 84, 3710 },
  { 85, 3696 },
  { 87, 3681 },
  { 88, 3665 },
  { 89, 3654 },
  { 91, 3648 },
  { 92, 3641 },
  { 93, 3632 },
  { 95, 3616 },
  { 96, 3592 },
  { 97, 3552 },
  { 99, 3483 },
  { 100, 3389 },
  { 100, 3389 }
};

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUCT battery_profile_temperature[] =
{
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 }
};      

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUCT r_profile_t0[] =
{              
  { 121, 4188 },
  { 121, 4174 },
  { 121, 4159 },
  { 121, 4144 },
  { 123, 4131 },
  { 123, 4117 },
  { 123, 4104 },
  { 124, 4091 },
  { 125, 4079 },
  { 116, 4066 },
  { 117, 4054 },
  { 117, 4042 },
  { 118, 4031 },
  { 120, 4020 },
  { 121, 4009 },
  { 123, 3998 },
  { 123, 3988 },
  { 125, 3978 },
  { 126, 3968 },
  { 127, 3959 },
  { 121, 3950 },
  { 122, 3941 },
  { 123, 3932 },
  { 124, 3924 },
  { 126, 3916 },
  { 129, 3908 },
  { 121, 3900 },
  { 124, 3893 },
  { 127, 3885 },
  { 129, 3878 },
  { 114, 3872 },
  { 115, 3865 },
  { 125, 3857 },
  { 121, 3847 },
  { 129, 3834 },
  { 125, 3821 },
  { 129, 3812 },
  { 117, 3805 },
  { 116, 3799 },
  { 115, 3794 },
  { 117, 3790 },
  { 117, 3787 },
  { 118, 3783 },
  { 120, 3780 },
  { 120, 3777 },
  { 123, 3775 },
  { 125, 3773 },
  { 125, 3771 },
  { 128, 3769 },
  { 129, 3768 },
  { 111, 3766 },
  { 123, 3766 },
  { 112, 3764 },
  { 113, 3762 },
  { 121, 3758 },
  { 119, 3749 },
  { 122, 3744 },
  { 125, 3741 },
  { 125, 3736 },
  { 126, 3730 },
  { 124, 3722 },
  { 126, 3715 },
  { 118, 3707 },
  { 128, 3697 },
  { 127, 3683 },
  { 128, 3669 },
  { 127, 3654 },
  { 127, 3645 },
  { 123, 3640 },
  { 120, 3634 },
  { 128, 3626 },
  { 121, 3613 },
  { 119, 3587 },
  { 116, 3542 },
  { 178, 3472 },
  { 184, 3377 }
};

// T1 0C
R_PROFILE_STRUCT r_profile_t1[] =
{              
  { 396, 4149 },
  { 396, 4123 },
  { 426, 4104 },
  { 438, 4089 },
  { 443, 4075 },
  { 450, 4062 },
  { 455, 4049 },
  { 459, 4037 },
  { 466, 4026 },
  { 467, 4015 },
  { 473, 4004 },
  { 476, 3994 },
  { 481, 3984 },
  { 484, 3974 },
  { 488, 3965 },
  { 491, 3956 },
  { 495, 3947 },
  { 499, 3939 },
  { 501, 3931 },
  { 506, 3923 },
  { 511, 3915 },
  { 512, 3907 },
  { 514, 3899 },
  { 515, 3891 },
  { 513, 3882 },
  { 511, 3873 },
  { 504, 3861 },
  { 495, 3850 },
  { 484, 3838 },
  { 477, 3828 },
  { 478, 3819 },
  { 475, 3812 },
  { 476, 3806 },
  { 477, 3801 },
  { 478, 3797 },
  { 482, 3794 },
  { 485, 3791 },
  { 488, 3788 },
  { 494, 3786 },
  { 495, 3784 },
  { 498, 3783 },
  { 504, 3782 },
  { 507, 3780 },
  { 510, 3779 },
  { 521, 3778 },
  { 523, 3777 },
  { 530, 3775 },
  { 534, 3774 },
  { 539, 3771 },
  { 545, 3769 },
  { 546, 3766 },
  { 551, 3762 },
  { 559, 3757 },
  { 567, 3751 },
  { 575, 3744 },
  { 587, 3735 },
  { 596, 3725 },
  { 608, 3713 },
  { 616, 3699 },
  { 624, 3684 },
  { 628, 3668 },
  { 633, 3651 },
  { 633, 3634 },
  { 637, 3618 },
  { 643, 3600 },
  { 658, 3581 },
  { 686, 3562 },
  { 723, 3539 },
  { 760, 3501 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 }
};

// T2 25C
R_PROFILE_STRUCT r_profile_t2[] =
{              
  { 396, 4149 },
  { 396, 4123 },
  { 426, 4104 },
  { 438, 4089 },
  { 443, 4075 },
  { 450, 4062 },
  { 455, 4049 },
  { 459, 4037 },
  { 466, 4026 },
  { 467, 4015 },
  { 473, 4004 },
  { 476, 3994 },
  { 481, 3984 },
  { 484, 3974 },
  { 488, 3965 },
  { 491, 3956 },
  { 495, 3947 },
  { 499, 3939 },
  { 501, 3931 },
  { 506, 3923 },
  { 511, 3915 },
  { 512, 3907 },
  { 514, 3899 },
  { 515, 3891 },
  { 513, 3882 },
  { 511, 3873 },
  { 504, 3861 },
  { 495, 3850 },
  { 484, 3838 },
  { 477, 3828 },
  { 478, 3819 },
  { 475, 3812 },
  { 476, 3806 },
  { 477, 3801 },
  { 478, 3797 },
  { 482, 3794 },
  { 485, 3791 },
  { 488, 3788 },
  { 494, 3786 },
  { 495, 3784 },
  { 498, 3783 },
  { 504, 3782 },
  { 507, 3780 },
  { 510, 3779 },
  { 521, 3778 },
  { 523, 3777 },
  { 530, 3775 },
  { 534, 3774 },
  { 539, 3771 },
  { 545, 3769 },
  { 546, 3766 },
  { 551, 3762 },
  { 559, 3757 },
  { 567, 3751 },
  { 575, 3744 },
  { 587, 3735 },
  { 596, 3725 },
  { 608, 3713 },
  { 616, 3699 },
  { 624, 3684 },
  { 628, 3668 },
  { 633, 3651 },
  { 633, 3634 },
  { 637, 3618 },
  { 643, 3600 },
  { 658, 3581 },
  { 686, 3562 },
  { 723, 3539 },
  { 760, 3501 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 },
  { 819, 3433 }
};

// T3 50C
R_PROFILE_STRUCT r_profile_t3[] =
{
  { 154, 4180 },
  { 154, 4165 },
  { 156, 4149 },
  { 157, 4135 },
  { 159, 4121 },
  { 151, 4108 },
  { 152, 4095 },
  { 153, 4082 },
  { 154, 4070 },
  { 146, 4058 },
  { 147, 4046 },
  { 149, 4034 },
  { 141, 4023 },
  { 142, 4012 },
  { 145, 4002 },
  { 147, 3991 },
  { 149, 3982 },
  { 142, 3972 },
  { 153, 3962 },
  { 146, 3953 },
  { 149, 3945 },
  { 151, 3936 },
  { 154, 3928 },
  { 148, 3920 },
  { 141, 3912 },
  { 144, 3905 },
  { 156, 3898 },
  { 149, 3890 },
  { 140, 3883 },
  { 151, 3876 },
  { 159, 3868 },
  { 154, 3858 },
  { 144, 3846 },
  { 142, 3835 },
  { 142, 3824 },
  { 146, 3815 },
  { 143, 3808 },
  { 140, 3802 },
  { 142, 3797 },
  { 142, 3793 },
  { 143, 3790 },
  { 144, 3786 },
  { 145, 3783 },
  { 147, 3781 },
  { 147, 3779 },
  { 149, 3777 },
  { 141, 3776 },
  { 141, 3774 },
  { 144, 3774 },
  { 145, 3772 },
  { 145, 3771 },
  { 147, 3770 },
  { 140, 3769 },
  { 142, 3767 },
  { 143, 3765 },
  { 144, 3762 },
  { 145, 3759 },
  { 144, 3754 },
  { 142, 3747 },
  { 140, 3739 },
  { 145, 3731 },
  { 147, 3722 },
  { 140, 3710 },
  { 142, 3696 },
  { 148, 3681 },
  { 148, 3665 },
  { 143, 3654 },
  { 140, 3648 },
  { 141, 3641 },
  { 151, 3632 },
  { 155, 3616 },
  { 152, 3592 },
  { 144, 3552 },
  { 137, 3483 },
  { 146, 3389 },
  { 146, 3389 }
};

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUCT r_profile_temperature[] =
{
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 },
  { 0, 0 }
};

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUCT_P fgauge_get_profile(unsigned int temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUCT_P fgauge_get_profile_r_table(unsigned int temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H
